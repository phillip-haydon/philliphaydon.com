<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="last-modified" content="2017-05-11T01:47:51.6102864+08:00" />
    <title>philliphaydon.com</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css" />
    <link rel="canonical" href="http://www.philliphaydon.com/2010/12/26/i-love-clean-client-ids-especially-with-net-2-0/" />
</head>
<body class="home blog">
    <div id="page" class="hfeed site">
        <header id="masthead" class="site-header fancy-container lightgreen" role="banner">
            <hgroup>
                <h1 class="site-title"><a href="/" title="philliphaydon.com" rel="home">philliphaydon.com</a></h1>
                <h2><small>Works on my PC...</small></h2>
                <p class="site-description">Pleb from New Zealand who was banished overseas and currently resides in Singapore.</p>
            </hgroup>
            <nav role="navigation" class="site-navigation main-navigation">
                <h1 class="assistive-text">Menu</h1>
                <div class="assistive-text skip-link"><a href="#content" title="Skip to content">Skip to content</a></div>
                <div class="menu">
                    <ul>
                        <li><a href="/about">About</a></li>
                        <li><a href="/category">Categories</a></li>
                        <li><a href="/archive">Archive</a></li>
                        <li><a href="/feed.xml">RSS / Feed</a></li>
                    </ul>
                </div>
            </nav>
        </header>
        <div id="main">
            <div id="primary" class="site-content">
                <div id="content" role="main">
                  

<div id="post">
    <h1>I love clean client IDs - especially with .Net 2.0!</h1>

    <div class="post-note">
        posted on 26 Dec 2010
            | <a href="/category/asp.net">ASP.NET</a>

        <div class="addthis_toolbox addthis_default_style" style="float:right;">
            <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
            <a class="addthis_button_tweet"></a>
            <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
            <a class="addthis_button_linkedin_counter"></a>
            <a class="addthis_counter addthis_pill_style"></a>
        </div>
    </div>



    

    <p>ASP.Net 4.0 got a brand spanking new feature. Clean ClientID's! ABOUT BLOODY TIME... Only, I'm working on a legacy application which can't be migrated to 4.0 :(</p>

<p>So why do we need Nice Readable, predictable ClientID's? I can think of two main reasons, outside of that, I would assume you're doing it wrong.</p>

<ol>
<li>JavaScript, to find elements...</li>
<li>JavaScript in external files where you can't write spaghetti code.</li>
</ol>

<p>What do I mean by spaghetti code? I mean this stuff:</p>

<pre><code>&lt;%= txtUserName.ClientID %&gt;
&lt;script type="text/javascript"&gt;
  var element = $('#&lt;%= txtUserName.ClientID %&gt;');
  var textbox = document.getElementById('&lt;%= txtUserName.ClientID %&gt;');
&lt;/script&gt;
</code></pre>

<p>I absolutely detest seeing this sort of thing. It makes me sick, and worst of all you can't pull this sort of code back to an external js file. In Web Forms, spaghetti coding is NOT your presentation, your server control is your presentation, the spaghetti code is your binding, and this should be in the codebehind.</p>

<!--excerpt-->

<p>Right, so what is my solution? Well I basically find all the server controls that are of a particular type, and write the information as a Json array to the HTML doc.</p>

<p>I've put the project on codeplex and named it, <a href="http://awesomeclientid.codeplex.com/">Awesome.ClientID</a>, because everything I do is awesome, atleast I like to think so :)</p>

<p>There's a few issues and the code is a little messy since I rushed it, but it works.</p>

<p>It serializes all the controls and you end up with a piece of JavaScript in the HTML Doc. Assume we had a form like:</p>

<pre><code>&lt;fieldset&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;label&gt;Username: &lt;/label&gt; &lt;asp:textbox id="txtUserName" runat="server" /&gt;&lt;/li&gt;
    &lt;li&gt;&lt;label&gt;Email: &lt;/label&gt; &lt;asp:textbox id="txtEmail" runat="server" /&gt;&lt;/li&gt;
  &lt;/ul&gt;
  &lt;asp:button id="btnSubmit" runat="server" text="Submit" /&gt;
&lt;/fieldset&gt;
</code></pre>

<p>This would get put into the HTML Doc like so:</p>

<pre><code>&lt;script type="text/javascript"&gt;
//&lt;![CDATA[
  var controls = {
    "txtUserName": "ctl00_ContentPlaceHolder1_txtUserName",
    "txtEmail": "ctl00_ContentPlaceHolder1_txtEmail",
    "btnSubmit": "ctl00_ContentPlaceHolder1_btnSubmit"
  };
//]]&gt;
&lt;/script&gt;
</code></pre>

<p>Now when you write your JavaScript, instead of writing spaghetti code, you can write it like:</p>

<pre><code>&lt;script type="text/javascript"&gt;
//&lt;![CDATA[
  var element = document.getElementById(controls.btnSubmit);
//]]&gt;
&lt;/script&gt;
</code></pre>

<p>Neat huh? That's not all tho, sometimes you need may need access to a property. For an example, at work we use a JavaScript charting library, and I need to pass in some widths so I can render the chart with the correct number of bars.</p>

<p>I have a property I set in my page with an attribute against it 'CanSerializeProperty', this will now get serialized just like the controls:</p>

<pre><code>[CanSerializeProperty]
protected int ScheduleWidth
{
  get; set;
}

&lt;script type="text/javascript"&gt;
//&lt;![CDATA[
  var properties = { "ScheduleWidth": "50" };
//]]&gt;
&lt;/script&gt;
</code></pre>

<p>Originally intended for just .NET 2.0/3.5, the properties feature is pretty handy for .NET 4.0 also.</p>

<p>I've got some additional features I'm going to add, at the moment it serializes for every page, but I'm going to add an attribute for pages to turn the feature off. And possibly make a web.config section so you can specify the controls you want to serialize. That way you can easily add controls from libraries such as Telerik without needing to recompile the project.</p>

<p><a href="http://awesomeclientid.codeplex.com/">http://awesomeclientid.codeplex.com/</a></p>


    <div id="disqus_thread"></div>
<script>
    var reset_disqus = function(){
        DISQUS.reset({
            reload: true,
            config: function () {
                //this.page.identifier = '';
                this.page.url = 'http://www.philliphaydon.com/2010/12/26/i-love-clean-client-ids-especially-with-net-2-0/';
                //this.page.title = '';
            }
        });
    };

    var disqus_shortname = 'philliphaydon';
    var disqus_url = 'http://www.philliphaydon.com/2010/12/26/i-love-clean-client-ids-especially-with-net-2-0/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    window.addEventListener('orientationchange', reset_disqus);
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-51ca97356d8c1454"></script>

</div>
                </div>
                <!-- #content -->
            </div>
            <!-- #primary .site-content -->

            <div id="secondary" class="widget-area fancy-container lightred" role="complementary">
                <aside id="text-5" class="widget widget_text">
                    <h1 class="widget-title">Follow</h1>
                    <div class="textwidget logos">
                        <a href="https://twitter.com/philliphaydon" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://twitter.com']);"><img src="/stylesheets/images/twitter.png"></a>
                        <a href="http://stackoverflow.com/users/456813/phill" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://stackoverflow.com']);"><img src="/stylesheets/images/stackoverflow.png"></a>
                        <a href="http://www.linkedin.com/in/philliphaydon" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://www.linkedin.com']);"><img src="/stylesheets/images/linkedin.png"></a>
                        <a href="https://plus.google.com/u/0/111751877537461442095" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://plus.google.com']);"><img src="/stylesheets/images/googleplus.png"></a>
                        <a href="https://github.com/phillip-haydon" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://github.com']);"><img src="/stylesheets/images/github.png"></a>
                        <a href="http://www.codeschool.com/users/philliphaydon" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://codeschool.com']);"><img src="/stylesheets/images/codeschool.png"></a>
                        <a href="http://www.kickstarter.com/profile/phillip-haydon" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://kickstarter.com']);"><img src="/stylesheets/images/kickstarter.png"></a>
                    </div>
                    <a href="http://stackoverflow.com/users/456813/phill">
                      <img src="http://stackoverflow.com/users/flair/456813.png" width="208" height="58" alt="profile for Phill at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for Phill at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
                    </a>
                    
                    <a href="http://nancyfx.org/mvm.html"><img src="/stylesheets/images/mvm.png"></a>
                    
                    <div id = "clustrback" style="width:162px; height:133px;  background:#f7f7f7 url(http://clustrmaps.com/admin/3d/images/st4_grey.png)  center no-repeat; text-align:center;">
                      <a href="http://www2.clustrmaps.com/counter/maps.php?url=http://www.philliphaydon.com/" style="width:160px; display:block; margin:0 auto;" id="clustrMapsLink">
                        <img src="http://www2.clustrmaps.com/counter/index2.php?url=http://www.philliphaydon.com/" style="border:0px; margin:15px auto;margin:15px auto;" alt="Locations of visitors to this page" title="Locations of visitors to this page" id="clustrMapsImg" />
                      </a>
                    </div>
                </aside>
                <!--aside id="text-8" class="widget widget_text">
                    <h1 class="widget-title">Other sites</h1>
                    <div class="textwidget">
                        <a href="http://csharptube.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://csharptube.com']);">csharptube.com</a><br />
                        <a href="http://thisisparrot.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://thisisparrot.com']);">Parrot</a><br />
                        <a href="http://shitprogrammerswrite.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://shitprogrammerswrite.com']);">Shit programmers write</a><br />
                    </div>
                </aside-->
                <aside id="linkcat-6" class="widget widget_links">
                    <h1 class="widget-title">Other Blogs</h1>
                    <ul class='xoxo blogroll'>
                        <li><a href="http://www.nickharris.net/" target="_top" onclick="javascript:_gaq.push(['_trackEvent','outbound-blogroll','http://nickharris.net/']);">Nick Harris</a></li>
                        <li><a href="http://www.mindscapehq.com/blog/" target="_top" onclick="javascript:_gaq.push(['_trackEvent','outbound-blogroll','http://www.mindscapehq.com/blog/']);">Mindscape</a></li>
                        <li><a href="http://blog.orangelightning.co.uk/" target="" onclick="javascript:_gaq.push(['_trackEvent','outbound-blogroll','http://blog.orangelightning.co.uk/']);">Phil Jones</a></li>
                        <li><a href="http://buildstarted.com/" target="" onclick="javascript:_gaq.push(['_trackEvent','outbound-blogroll','http://buildstarted.com']);">Ben Dornis</a></li>
                        <li><a href="http://jflood.net/" target="" onclick="javascript:_gaq.push(['_trackEvent','outbound-blogroll','http://jflood.net/']);">Jospeh Flood</a></li>
                    </ul>
                    
                </aside>
                <aside id="archives-4" class="widget widget_archive">
                    <h1 class="widget-title">Archive</h1>
                    <ul class="posts">
                          <li><a href="/archive#20175">May, 2017</a></li>
                          <li><a href="/archive#20173">March, 2017</a></li>
                          <li><a href="/archive#20165">May, 2016</a></li>
                          <li><a href="/archive#20161">January, 2016</a></li>
                          <li><a href="/archive#201510">October, 2015</a></li>
                          <li><a href="/archive#20148">August, 2014</a></li>
                          <li><a href="/archive#20146">June, 2014</a></li>
                          <li><a href="/archive#20145">May, 2014</a></li>
                          <li><a href="/archive#20144">April, 2014</a></li>
                          <li><a href="/archive#20142">February, 2014</a></li>
                          <li><a href="/archive#20141">January, 2014</a></li>
                          <li><a href="/archive#201312">December, 2013</a></li>
                          <li><a href="/archive#201311">November, 2013</a></li>
                          <li><a href="/archive#201310">October, 2013</a></li>
                          <li><a href="/archive#20139">September, 2013</a></li>
                          <li><a href="/archive#20138">August, 2013</a></li>
                          <li><a href="/archive#20137">July, 2013</a></li>
                          <li><a href="/archive#20136">June, 2013</a></li>
                          <li><a href="/archive#20135">May, 2013</a></li>
                          <li><a href="/archive#20134">April, 2013</a></li>
                          <li><a href="/archive#20133">March, 2013</a></li>
                          <li><a href="/archive#20132">February, 2013</a></li>
                          <li><a href="/archive#20131">January, 2013</a></li>
                          <li><a href="/archive#201212">December, 2012</a></li>
                          <li><a href="/archive#201211">November, 2012</a></li>
                          <li><a href="/archive#201210">October, 2012</a></li>
                          <li><a href="/archive#20129">September, 2012</a></li>
                          <li><a href="/archive#20127">July, 2012</a></li>
                          <li><a href="/archive#20126">June, 2012</a></li>
                          <li><a href="/archive#20124">April, 2012</a></li>
                          <li><a href="/archive#20123">March, 2012</a></li>
                          <li><a href="/archive#20122">February, 2012</a></li>
                          <li><a href="/archive#20121">January, 2012</a></li>
                          <li><a href="/archive#201112">December, 2011</a></li>
                          <li><a href="/archive#201111">November, 2011</a></li>
                          <li><a href="/archive#201110">October, 2011</a></li>
                          <li><a href="/archive#20119">September, 2011</a></li>
                          <li><a href="/archive#20118">August, 2011</a></li>
                          <li><a href="/archive#20117">July, 2011</a></li>
                          <li><a href="/archive#20116">June, 2011</a></li>
                          <li><a href="/archive#20115">May, 2011</a></li>
                          <li><a href="/archive#20114">April, 2011</a></li>
                          <li><a href="/archive#20113">March, 2011</a></li>
                          <li><a href="/archive#20112">February, 2011</a></li>
                          <li><a href="/archive#20111">January, 2011</a></li>
                          <li><a href="/archive#201012">December, 2010</a></li>
                          <li><a href="/archive#201011">November, 2010</a></li>
                          <li><a href="/archive#201010">October, 2010</a></li>
                          <li><a href="/archive#20109">September, 2010</a></li>
                          <li><a href="/archive#20097">July, 2009</a></li>
                    </ul>
                </aside>
            </div>
            <!-- #secondary .widget-area -->


        </div>
        <!-- #main -->

        <footer id="colophon" class="site-footer" role="contentinfo">
            <div class="site-info">
                Powered by <a href="https://github.com/Sandra/Sandra.Snow" rel="generator">Sandra.Snow v1.6.0</a>.	
            </div>
            <!-- .site-info -->
        </footer>
        <!-- #colophon .site-footer -->
    </div>
    <!-- #page .hfeed .site -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="/javascripts/prettify.js"></script>
    
    <script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-655975-13']);
_gaq.push(['_trackPageview']);
        
(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>
    
    <script src="/javascripts/audio.min.js"></script>
    
    <script>
      $(function () {
        $("pre code").parent().each(function () {
          if (!$(this).hasClass("prettyprint")) {
            $(this).addClass("prettyprint");
            a = true
          }
        });

        prettyPrint();
      });
      audiojs.events.ready(function() {
        var as = audiojs.createAll();
      });
    </script>
</body>
</html>
